# Kalia Design System - Mercure

## Estética
Compacta. Densa. Profesional. Estilo dashboard enterprise/ERP.
Sin tarjetas de KPIs gigantes. Información útil, no decorativa.

## Principios
1. **Densidad sobre espaciado** - Maximizar información visible
2. **Tablas como protagonistas** - Los datos se muestran en tablas, no en cards
3. **Sin KPIs gigantes** - Si hay métricas, mostrarlas inline o en badges pequeños
4. **Tipografía compacta** - text-sm como base, text-xs para secundarios
5. **Headers mínimos** - Sin descripciones largas, títulos directos

## Colores

### Color Accent (Cliente: Mercure)
- Primary: `#F97316` (orange-500) - Solo para badges de estado activo y acciones principales
- Primary hover: `#EA580C` (orange-600)

### Escala de grises (Base)
- Background: `#FFFFFF` (white) - Fondo principal blanco
- Surface: `#FAFAFA` (neutral-50) - Para headers de tabla
- Border: `#E5E5E5` (neutral-200)
- Text primary: `#171717` (neutral-900)
- Text secondary: `#525252` (neutral-600)
- Text muted: `#A3A3A3` (neutral-400)

### Navbar
- Background: `#18181B` (zinc-900)
- Text: `#FFFFFF` (white)

## Tipografía
- Font: Geist Sans
- **Base: text-sm** (14px) - NO text-base
- Headers de página: text-lg font-medium (no text-2xl)
- Headers de sección: text-xs uppercase tracking-wide text-neutral-500
- Celdas de tabla: text-sm
- Labels: text-xs font-medium

## Componentes

### Page Layout
```
bg-white min-h-screen
```

### Page Header
```
px-4 py-3 border-b border-neutral-200
Título: text-lg font-medium
Sin descripción debajo del título
```

### Inputs
```
h-8 text-sm border-neutral-200 focus:border-neutral-400 focus:ring-0 rounded
```

### Buttons
- Primary: `h-8 px-3 text-sm bg-neutral-900 hover:bg-neutral-800 text-white rounded`
- Accent: `h-8 px-3 text-sm bg-orange-500 hover:bg-orange-600 text-white rounded`
- Secondary: `h-8 px-3 text-sm border border-neutral-200 hover:bg-neutral-50 rounded`
- Ghost: `h-8 px-3 text-sm hover:bg-neutral-100 rounded`

### Tablas (protagonistas)
```
w-full text-sm
Header: bg-neutral-50 text-xs font-medium text-neutral-500 uppercase tracking-wide
Celdas: px-3 py-2 (compactas)
Borders: border-b border-neutral-100
Hover: hover:bg-neutral-50
```

### Badges de estado
```
text-xs px-1.5 py-0.5 rounded font-medium
- success: bg-green-50 text-green-700
- warning: bg-amber-50 text-amber-700  
- error: bg-red-50 text-red-700
- info: bg-blue-50 text-blue-700
- default: bg-neutral-100 text-neutral-600
```

### Navbar
- Height: `h-12`
- Background: `bg-zinc-900`
- Tabs: `text-sm`
- Padding: `px-4`

## Espaciado (compacto)
- Page padding: `px-4 py-4`
- Entre secciones: `mt-4` o `mt-6`
- Padding interno cards: `p-3`
- Gap en grids: `gap-3`

## Layout de páginas
1. Header con título y acción (si hay) en la misma línea
2. Filtros inline (si hay)
3. Tabla principal ocupando el ancho completo
4. Sin tarjetas de stats arriba - si hay métricas, mostrar como badges o inline

## Reglas estrictas
1. **NO usar text-2xl o text-3xl** para títulos
2. **NO usar cards de KPIs/Stats grandes**
3. **NO usar p-6 o p-8** - máximo p-4
4. **NO usar mt-8 o mt-12** - máximo mt-6
5. Preferir tablas sobre cards para listar datos
6. Badges pequeños, no grandes
7. Fondo blanco, no gris

## Base de Datos
- Las tablas físicas están en el schema `mercure`
- Existen VIEWS en `public` para uso con la API de Supabase
- Al usar el cliente: `supabase.from('mercure_shipments')`
- NO usar `.schema('mercure')`

### Tablas principales
- `mercure_entities` - Clientes y proveedores (legal_name, tax_id, address, phone, email, contact_name, destination)
- `mercure_client_commercial_terms` - Condiciones comerciales por cliente (entity_id, credit_terms, credit_days, payment_method, tariff_type, tariff_modifier, insurance_rate, sales_rep)
- `mercure_shipments` - Envíos (delivery_note_number, status, sender_id, recipient_id, package_quantity, weight_kg, declared_value, remito_image_url, cargo_image_url)
- `mercure_events` - Eventos/historial
- `mercure_insurance_rates` - Tasas de seguro
- `mercure_profiles` - Usuarios
- `mercure_quotations` - Cotizaciones
- `mercure_tariffs` - Tarifas
- `mercure_trips` - Viajes
- `mercure_vehicles` - Vehículos

### Condiciones comerciales (mercure_client_commercial_terms)
- `credit_terms`: 'contado', 'cuenta_corriente'
- `credit_days`: 0, 5, 15, 30
- `payment_method`: 'transferencia', 'cheque', 'efectivo'
- `tariff_type`: 'base', 'base-10', 'base-15', 'base-20', 'm3', 'especial'
- `tariff_modifier`: -20, -15, -10, 0, +10 (descuento/recargo sobre tarifa base)
- `insurance_rate`: decimal (0.008 = 8/1000, 0.01 = 1%)

### Pipeline de estados (mercure_shipments.status)
1. `ingresada` - Llegó al depósito origen, pendiente medir/pesar
2. `consolidada` - Asignada a camión de larga distancia
3. `en_transito` - Camión viajando hacia destino
4. `en_descarga` - Llegó, en clasificación
5. `disponible` - En depósito destino, lista para reparto
6. `en_reparto` - Salió en camioneta de última milla
7. `entregada` - Cliente recibió y firmó ✅
8. `no_entregada` - Intento fallido, reprogramar
9. `rechazada` - Cliente rechazó mercadería
10. `rendida` - Chofer entregó remito y dinero
11. `facturada` - Incluida en liquidación

### Campos de pago (mercure_shipments)
- `paid_by`: 'origen' (remitente paga) | 'destino' (destinatario paga)
- `payment_terms`: 'contado' (cobrar contra entrega) | 'cuenta_corriente'
